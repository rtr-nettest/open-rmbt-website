@if (form$ | async; as form) {
<div class="app-container">
  <form [formGroup]="form">
    <div class="app-row">
      <div class="app-col">
        @if (form.controls.type.value === 'mobile') {
        <button
          class="app-button"
          (click)="changeType('mobile')"
          mat-flat-button
        >
          {{ "Mobile" | translate }}
        </button>
        } @else {<button
          class="app-button"
          (click)="changeType('mobile')"
          mat-stroked-button
        >
          {{ "Mobile" | translate }}</button
        >} @if (form.controls.type.value === 'wifi') {
        <button class="app-button" (click)="changeType('wifi')" mat-flat-button>
          {{ "Wlan App" | translate }}
        </button>
        } @else {<button
          class="app-button"
          (click)="changeType('wifi')"
          mat-stroked-button
        >
          {{ "Wlan App" | translate }}</button
        >} @if (form.controls.type.value === 'browser') {
        <button
          class="app-button"
          (click)="changeType('browser')"
          mat-flat-button
        >
          {{ "Browser" | translate }}
        </button>
        } @else {<button
          class="app-button"
          (click)="changeType('browser')"
          mat-stroked-button
        >
          {{ "Browser" | translate }}</button
        >}
      </div>
    </div>
    <div class="app-row">
      <div class="app-col">
        <span class="app-label">{{ "Providers from" | translate }}</span>
        <mat-select
          id="country"
          class="app-select"
          formControlName="country"
          panelWidth=""
        >
          @for (item of countries; track $index) {
          <mat-option class="app-option" [value]="item[0]">{{
            item[1] | translate
          }}</mat-option>
          }
        </mat-select>
      </div>
      @if (form.controls.country.value === 'AT') {
      <div class="app-spacer--small"></div>
      <div class="app-col">
        <mat-select class="app-select" formControlName="province" panelWidth="">
          <mat-option class="app-option" [value]="-1">{{
            "All provinces" | translate
          }}</mat-option>
          @for (item of provinces; track $index) {
          <mat-option class="app-option" [value]="$index + 1">{{
            item[1] | translate
          }}</mat-option>
          }
        </mat-select>
      </div>
      }
      <div class="app-spacer"></div>
      <div class="app-col">
        <span class="app-label">{{ "Time span" | translate }}</span>
        <mat-select
          id="duration"
          class="app-select"
          formControlName="duration"
          panelWidth=""
        >
          @for (item of durations; track $index) {
          <mat-option class="app-option" [value]="item[0]">{{
            item[1] | translate
          }}</mat-option>
          }
        </mat-select>
      </div>
      <div class="app-spacer"></div>
      <div class="app-col">
        <button
          type="button"
          (click)="setShowMore()"
          class="app-link"
          iconPositionEnd="end"
          [attr.aria-expanded]="showMore"
          [attr.aria-controls]="'additionalFilters'"
        >
          @if (!showMore) {
          <span>{{ "More" | translate }}</span
          ><mat-icon>arrow_drop_down</mat-icon>
          } @else {
          <span>{{ "Less" | translate }}</span
          ><mat-icon>arrow_drop_up</mat-icon>
          }
        </button>
      </div>
    </div>
    @if (showMore) {
    <div id="additionalFilters" class="app-row">
      <div class="app-col">
        <span class="app-label">{{ "Technology" | translate }}</span>
        <mat-select
          id="network_type_group"
          class="app-select"
          formControlName="network_type_group"
          panelWidth=""
        >
          @for (item of tecnologies; track $index) {
          <mat-option class="app-option" [value]="item[0]">{{
            item[1] | translate
          }}</mat-option>
          }
        </mat-select>
      </div>
      <div class="app-spacer"></div>
      <div class="app-col">
        <span class="app-label">{{ "Quantile" | translate }}</span>
        <mat-select
          id="quantile"
          class="app-select"
          formControlName="quantile"
          panelWidth=""
        >
          @for (item of quantiles; track $index) {
          <mat-option class="app-option" [value]="item[0]">{{
            item[1] | translate
          }}</mat-option>
          }
        </mat-select>
      </div>
      <div class="app-spacer"></div>
      <div class="app-col">
        <span class="app-label">{{ "Location accuracy" | translate }}</span>
        <mat-select
          id="location_accuracy"
          class="app-select"
          formControlName="location_accuracy"
          panelWidth=""
        >
          @for (item of locationAccuracies; track $index) {
          <mat-option class="app-option" [value]="item[0]">{{
            item[1] | translate
          }}</mat-option>
          }
        </mat-select>
      </div>
      <div class="app-spacer"></div>
      <div class="app-col">
        <span class="app-label">{{ "End date" | translate }}</span>
        <mat-form-field class="app-form-field" appearance="outline">
          <input
            matInput
            id="end_date"
            [matDatepicker]="picker"
            formControlName="end_date"
            placeholder="MM/DD/YYYY"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </div>
    </div>
    }
  </form>
</div>
}
